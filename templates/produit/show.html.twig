{% block head %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<title>Produit</title>
{% endblock %}
{% block body %}
    {% include 'layouts/nav.html.twig' %}
    <div class="container">
        <h1>Produit</h1>

        <table class="table">
            <tbody>
                <tr>
                    <th>Id</th>
                    <td>{{ produit.id }}</td>
                </tr>
                <tr>
                    <th>Nom</th>
                    <td>{{ produit.nom }}</td>
                </tr>
                <tr>
                    <th>Description</th>
                    <td>{{ produit.description }}</td>
                </tr>
                <tr>
                    <th>Prix</th>
                    <td>{{ produit.prix }}</td>
                </tr>
                <tr>
                    <th>Stock</th>
                    <td>{{ produit.stock }}</td>
                </tr>
                <tr>
                    <th>sous Categories</th>
                    {% for subcategory in produit.subcategories %}
                        <td>
                            {{subcategory.name}}
                        </td>
                    {% endfor %}
                </tr>
            </tbody>
        </table>
        <br>
        <hr>
        <h3>Avis des clients</h3>

        {% if produit.avis|length > 0 %}
            {% for avis in produit.avis %}
                <div class="card mb-2">
                    <div class="card-body">
                        <strong>Note:</strong> {{ avis.note }}/5 <br>
                        <strong>Commentaire:</strong>
                        <p>{{ avis.commentaire }}</p>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="text-muted">Aucun avis pour ce produit.</p>
        {% endif %}

        <hr>
        <h4>Laisser un avis</h4>

        <form method="post" action="{{ path('app_avis_add', {id: produit.id}) }}">
            <div class="mb-2">
                <label class="form-label">Note (1â€“5)</label>
                <select name="note" class="form-control" required>
                    {% for i in 1..5 %}
                        <option value="{{ i }}">{{ i }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="mb-2">
                <label class="form-label">Commentaire</label>
                <textarea name="commentaire" class="form-control" required></textarea>
            </div>

            <button class="btn btn-primary">Envoyer</button>
        </form>

        <a class="btn btn-outline-primary" href="{{ path('app_produit_index') }}">back to list</a>

        <a class="btn btn-success" href="{{ path('app_produit_edit', {'id': produit.id}) }}">edit</a>

        <a class="btn btn-outline-success" href="{{ path('app_produit_stock_add_history', {'id': produit.id}) }}">afficher l'histoire d'ajout du produit</a>

        {{ include('produit/_delete_form.html.twig') }}
    </div>
{% endblock %}
